<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–í–µ–±-–∫–∞—Ä—Ç–∞</title>
  <style>
    body {
      margin: 0;
      padding: 0;
    }
    #map {
      width: 100vw;
      height: 100vh;
      background-color: #fcfaf3;
      z-index: 0;
    }

    .logo {
        position: absolute;
        top: 0;
        left: 0;
        margin: 1%;
    }

    .legend {
        position: fixed;
        bottom: 0;
        right: 0;
        margin: 1%;
        margin-right: 0;
    }

    .icon {
      max-width: 38px !important;
      max-height: 38px !important;
    }

  </style>
  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
  <div id="map"></div>

  <svg class="logo" width="393" height="148">
    <image href="logo.svg"/>
  </svg>

  <svg class="legend" width="250" height="328">
    <image href="legend.svg"/>
  </svg>

  <script>
    // –ó–∞–≥—Ä—É–∂–∞–µ–º Leaflet JS –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è
    window.onload = function () {
      // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º —Ñ–æ–Ω–æ–º –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
      var map = L.map('map', {
        crs: L.CRS.Simple,
        minZoom: -1, // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑—É–º–∞, —á—Ç–æ–±—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–Ω–∏–º–∞–ª–æ –≤–µ—Å—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
        maxZoom: 2 // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑—É–º–∞
      });

      // –£–¥–∞–ª—è–µ–º –Ω–µ–Ω—É–∂–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
      map.removeControl(map.zoomControl);
      //map.removeControl(map.attributionControl);

      // –î–æ–±–∞–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
      var imageUrl = 'map.svg';
      var imageBounds = [[0, 0], [1000, 1000]]; // –ó–∞–º–µ–Ω–∏—Ç–µ 1000 –Ω–∞ —Ä–∞–∑–º–µ—Ä—ã –≤–∞—à–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
      L.imageOverlay(imageUrl, imageBounds).addTo(map);

      var originalIconSize = 50; // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏

      function createOneIcon(size) {
        return L.icon({
          iconUrl: 'empty.png',
          iconSize: [size, size],
          className: 'icon'
        });
      }
      function createTwoIcon(size) {
        return L.icon({
          iconUrl: 'empty.png',
          iconSize: [size * 3, size],
          className: 'icon'
        });
      }
      function createThreeIcon(size) {
        return L.icon({
          iconUrl: 'empty.png',
          iconSize: [size * 3.8, size],
          className: 'icon'
        });
      }
      function createFourIcon(size) {
        return L.icon({
          iconUrl: 'empty.png',
          iconSize: [size * 5.25, size],
          className: 'icon'
        });
      }



      var riverantMarker = L.marker([437.5, 500.5], {icon: createThreeIcon(originalIconSize)}, className="L6").addTo(map)
        .bindPopup('Riverant')
        .openPopup();

      var timberlandMarker = L.marker([401.5, 338.5], {icon: createOneIcon(originalIconSize)}).addTo(map) // <3
        .bindPopup('Timberland')
        .openPopup();

      var centralMarker = L.marker([598, 645], {icon: createFourIcon(originalIconSize)}).addTo(map)
        .bindPopup('Central')
        .openPopup();

      var wompwompMarker = L.marker([518, 578], {icon: createOneIcon(originalIconSize)}).addTo(map)
        .bindPopup('Womp Womp')
        .openPopup();

      var andesworthMarker = L.marker([330, 485], {icon: createOneIcon(originalIconSize)}).addTo(map)
        .bindPopup('Port Andersworth')
        .openPopup();

      var krunkeriaMarker = L.marker([651.25, 874.5], {icon: createOneIcon(originalIconSize)}).addTo(map)
        .bindPopup('Krunkeria')
        .openPopup();

      var cherryvilleMarker = L.marker([719.5, 693.25], {icon: createOneIcon(originalIconSize)}).addTo(map)
        .bindPopup('Cherryville')
        .openPopup();

      var blossomingValleyMarker = L.marker([775, 683.5], {icon: createTwoIcon(originalIconSize)}).addTo(map)
        .bindPopup('Blossoming Valley')
        .openPopup();

      var newportMarker = L.marker([830, 654.5], {icon: createOneIcon(originalIconSize)}).addTo(map)
        .bindPopup('Newport')
        .openPopup();

      var lyciaBridgeMarker = L.marker([920, 606.5], {icon: createFourIcon(originalIconSize)}).addTo(map)
        .bindPopup('Lycia Bridge')
        .openPopup();

      var capitalisoriaMarker = L.marker([954.25, 548.5], {icon: createOneIcon(originalIconSize)}).addTo(map)
        .bindPopup('Capitalisoria')
        .openPopup();

      var rublenikaMarker = L.marker([990, 759.2], {icon: createOneIcon(originalIconSize)}).addTo(map)
        .bindPopup('Rublenika')
        .openPopup();

      var refineryMarker = L.marker([793.7, 477.5], {icon: createOneIcon(originalIconSize)}).addTo(map)
        .bindPopup('Refinery')
        .openPopup();

      var fortBoreasMarker = L.marker([793.7, 311.5], {icon: createOneIcon(originalIconSize)}).addTo(map)
        .bindPopup('Fort Boreas')
        .openPopup();

      var hammeringtonMarker = L.marker([722.75, 311.5], {icon: createOneIcon(originalIconSize)}).addTo(map)
        .bindPopup('Hammerington')
        .openPopup();

      var middleseaBeachMarker = L.marker([348, 219], {icon: createOneIcon(originalIconSize)}).addTo(map)
        .bindPopup('Middlesea Beach')
        .openPopup();

      var jungletownIndustrialMarker = L.marker([294.75, 219], {icon: createOneIcon(originalIconSize)}).addTo(map) // <3
        .bindPopup('Jungletown Industrial')
        .openPopup();

      var jungletownTempleMarker = L.marker([241, 238], {icon: createThreeIcon(originalIconSize)}).addTo(map)
        .bindPopup('Jungletown Temple')
        .openPopup();

      var communistaMarker = L.marker([241, 414], {icon: createTwoIcon(originalIconSize)}).addTo(map)
        .bindPopup('Communista')
        .openPopup();

      var grimsbyPeaksMarker = L.marker([136, 248], {icon: createTwoIcon(originalIconSize)}).addTo(map)
        .bindPopup('Greamsby Peaks')
        .openPopup();

      var oakridgeMarker = L.marker([107, 321.25], {icon: createOneIcon(originalIconSize)}).addTo(map)
        .bindPopup('Oakridge')
        .openPopup();

      var CheeselandMarker = L.marker([107, 386.75], {icon: createOneIcon(originalIconSize)}).addTo(map) //üßÄ
        .bindPopup('Cheeseland')
        .openPopup();

      var staraWiesMarker = L.marker([107, 442.5], {icon: createOneIcon(originalIconSize)}).addTo(map) // amaza
        .bindPopup('Stara Wies')
        .openPopup();

      var newIndustriaMarker = L.marker([90.25, 168.75], {icon: createOneIcon(originalIconSize)}).addTo(map) // no lagü§ó
        .bindPopup('New Industria')
        .openPopup();



      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–∞—Ä—Ç—ã
      map.fitBounds(imageBounds);

      // –û—Ç–∫–ª—é—á–∞–µ–º –¥–≤–æ–π–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –¥–ª—è –∑—É–º–∞
      map.doubleClickZoom.disable();

      function updateIconSizes() {
        var currentZoom = map.getZoom();
        var elements = document.querySelectorAll('.icon');
        var newOneSize;
        var newOneSizeEnd;
        var newTwoSize;
        var newThreeSize;
        var newFourSize;
        elements.forEach(function(element) {
          element.style.display = '';
        });
        if (currentZoom === 2) {
          newOneSize = 60
          newOneSizeEnd = 75
          newTwoSize = 54.5
          newThreeSize = 60
          newFourSize = 60
        } 
        else if (currentZoom === 1) {
          newOneSize = 30.75
          newOneSizeEnd = 42
          newTwoSize = 25.5
          newThreeSize = 30
          newFourSize = 30
        } 
        else if (currentZoom === 0) {
          newOneSize = 15.8
          newOneSizeEnd = 22
          newTwoSize = 14
          newThreeSize = 15.5
          newFourSize = 15
        } 
        else if (currentZoom === -1) {
          newOneSize = 8.25
          newOneSizeEnd = 10
          newTwoSize = 7.25
          newThreeSize = 8
          newFourSize = 7.7
        }
        riverantMarker.setIcon(createThreeIcon(newThreeSize));
        timberlandMarker.setIcon(createOneIcon(newOneSize));
        centralMarker.setIcon(createFourIcon(newFourSize));
        wompwompMarker.setIcon(createOneIcon(newOneSize));
        andesworthMarker.setIcon(createOneIcon(newOneSizeEnd));
        krunkeriaMarker.setIcon(createOneIcon(newOneSizeEnd));
        cherryvilleMarker.setIcon(createOneIcon(newOneSize));
        blossomingValleyMarker.setIcon(createTwoIcon(newTwoSize));
        newportMarker.setIcon(createOneIcon(newTwoSize));
        lyciaBridgeMarker.setIcon(createFourIcon(newFourSize));
        capitalisoriaMarker.setIcon(createOneIcon(newOneSizeEnd));
        rublenikaMarker.setIcon(createOneIcon(newOneSizeEnd));
        refineryMarker.setIcon(createOneIcon(newOneSize));
        fortBoreasMarker.setIcon(createOneIcon(newOneSize));
        hammeringtonMarker.setIcon(createOneIcon(newOneSize));
        middleseaBeachMarker.setIcon(createOneIcon(newOneSize));
        jungletownIndustrialMarker.setIcon(createOneIcon(newOneSize));
        jungletownTempleMarker.setIcon(createThreeIcon(newThreeSize));
        communistaMarker.setIcon(createTwoIcon(newTwoSize));
        grimsbyPeaksMarker.setIcon(createTwoIcon(newTwoSize));
        oakridgeMarker.setIcon(createOneIcon(newOneSize));
        CheeselandMarker.setIcon(createOneIcon(newOneSize));
        staraWiesMarker.setIcon(createOneIcon(newOneSizeEnd));
        newIndustriaMarker.setIcon(createOneIcon(newOneSizeEnd));

        console.log(currentZoom)
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è "zoomend" –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∑–Ω–∞—á–∫–æ–≤ –ø—Ä–∏ –∑—É–º–µ
      map.on('zoomend', updateIconSizes);

      map.on('zoomstart', function(){
        var elements = document.querySelectorAll('.icon');
        elements.forEach(function(element) {
          element.style.display = 'none';
        });
      });

      // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –∑–Ω–∞—á–∫–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
      updateIconSizes();
    };
  </script>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</body>
</html>
